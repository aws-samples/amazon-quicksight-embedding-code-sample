{
  "Description": "An auto-generated nested stack for the @function directive.",
  "AWSTemplateFormatVersion": "2010-09-09",
  "Conditions": {
    "HasEnvironmentParameter": {
      "Fn::Not": [
        {
          "Fn::Equals": [
            {
              "Ref": "referencetotransformerrootstackenv10C5A902Ref"
            },
            "NONE"
          ]
        }
      ]
    }
  },
  "Resources": {
    "PbqAnonymousDashboardEmbeddingLambdaDataSourceServiceRole48B93E44": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqAnonymousDashboardEmbeddingLambdaDataSourceServiceRoleDefaultPolicy896B7D57": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqAnonymousDashboardEmbeddingLambdaDataSourceServiceRoleDefaultPolicy896B7D57",
        "Roles": [
          {
            "Ref": "PbqAnonymousDashboardEmbeddingLambdaDataSourceServiceRole48B93E44"
          }
        ]
      }
    },
    "PbqAnonymousDashboardEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqAnonymousDashboardEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousDashboardEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqAnonymousDashboardEmbeddingLambdaDataSourceServiceRole48B93E44",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqAnonymousDashboardEmbeddingLambdaDataSourceInvokePbqAnonymousDashboardEmbeddingLambdaDataSourceAppSyncFunction43F57ACE": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqAnonymousDashboardEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqAnonymousDashboardEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousDashboardEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousDashboardEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqAnonymousDashboardEmbeddingLambdaDataSource"
      ]
    },
    "QueryanonymousDashboardEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "anonymousDashboardEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqAnonymousDashboardEmbeddingLambdaDataSourceInvokePbqAnonymousDashboardEmbeddingLambdaDataSourceAppSyncFunction43F57ACE",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"anonymousDashboardEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.anonymousDashboardEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqAnonymousQEmbeddingLambdaDataSourceServiceRole51FE9E71": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqAnonymousQEmbeddingLambdaDataSourceServiceRoleDefaultPolicyF27EF6B8": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqAnonymousQEmbeddingLambdaDataSourceServiceRoleDefaultPolicyF27EF6B8",
        "Roles": [
          {
            "Ref": "PbqAnonymousQEmbeddingLambdaDataSourceServiceRole51FE9E71"
          }
        ]
      }
    },
    "PbqAnonymousQEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqAnonymousQEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousQEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqAnonymousQEmbeddingLambdaDataSourceServiceRole51FE9E71",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqAnonymousQEmbeddingLambdaDataSourceInvokePbqAnonymousQEmbeddingLambdaDataSourceAppSyncFunction0E9E5058": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqAnonymousQEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqAnonymousQEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousQEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousQEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqAnonymousQEmbeddingLambdaDataSource"
      ]
    },
    "QueryanonymousQEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "anonymousQEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqAnonymousQEmbeddingLambdaDataSourceInvokePbqAnonymousQEmbeddingLambdaDataSourceAppSyncFunction0E9E5058",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"anonymousQEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.anonymousQEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqAnonymousVisualEmbeddingLambdaDataSourceServiceRole89444072": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqAnonymousVisualEmbeddingLambdaDataSourceServiceRoleDefaultPolicy98596A53": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqAnonymousVisualEmbeddingLambdaDataSourceServiceRoleDefaultPolicy98596A53",
        "Roles": [
          {
            "Ref": "PbqAnonymousVisualEmbeddingLambdaDataSourceServiceRole89444072"
          }
        ]
      }
    },
    "PbqAnonymousVisualEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqAnonymousVisualEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqAnonymousVisualEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqAnonymousVisualEmbeddingLambdaDataSourceServiceRole89444072",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqAnonymousVisualEmbeddingLambdaDataSourceInvokePbqAnonymousVisualEmbeddingLambdaDataSourceAppSyncFunctionDA147C1C": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqAnonymousVisualEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqAnonymousVisualEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousVisualEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqAnonymousVisualEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqAnonymousVisualEmbeddingLambdaDataSource"
      ]
    },
    "QueryanonymousVisualEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "anonymousVisualEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqAnonymousVisualEmbeddingLambdaDataSourceInvokePbqAnonymousVisualEmbeddingLambdaDataSourceAppSyncFunctionDA147C1C",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"anonymousVisualEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.anonymousVisualEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqUserBasedConsoleEmbeddingLambdaDataSourceServiceRoleCB6458C8": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqUserBasedConsoleEmbeddingLambdaDataSourceServiceRoleDefaultPolicy4415E232": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqUserBasedConsoleEmbeddingLambdaDataSourceServiceRoleDefaultPolicy4415E232",
        "Roles": [
          {
            "Ref": "PbqUserBasedConsoleEmbeddingLambdaDataSourceServiceRoleCB6458C8"
          }
        ]
      }
    },
    "PbqUserBasedConsoleEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqUserBasedConsoleEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedConsoleEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqUserBasedConsoleEmbeddingLambdaDataSourceServiceRoleCB6458C8",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqUserBasedConsoleEmbeddingLambdaDataSourceInvokePbqUserBasedConsoleEmbeddingLambdaDataSourceAppSyncFunction43E909C4": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqUserBasedConsoleEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqUserBasedConsoleEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedConsoleEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedConsoleEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqUserBasedConsoleEmbeddingLambdaDataSource"
      ]
    },
    "QueryuserBasedConsoleEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "userBasedConsoleEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqUserBasedConsoleEmbeddingLambdaDataSourceInvokePbqUserBasedConsoleEmbeddingLambdaDataSourceAppSyncFunction43E909C4",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"userBasedConsoleEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.userBasedConsoleEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqUserBasedDashboardEmbeddingLambdaDataSourceServiceRole4CB2F7A3": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqUserBasedDashboardEmbeddingLambdaDataSourceServiceRoleDefaultPolicy0D364A26": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqUserBasedDashboardEmbeddingLambdaDataSourceServiceRoleDefaultPolicy0D364A26",
        "Roles": [
          {
            "Ref": "PbqUserBasedDashboardEmbeddingLambdaDataSourceServiceRole4CB2F7A3"
          }
        ]
      }
    },
    "PbqUserBasedDashboardEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqUserBasedDashboardEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedDashboardEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqUserBasedDashboardEmbeddingLambdaDataSourceServiceRole4CB2F7A3",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqUserBasedDashboardEmbeddingLambdaDataSourceInvokePbqUserBasedDashboardEmbeddingLambdaDataSourceAppSyncFunctionFDBF8630": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqUserBasedDashboardEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqUserBasedDashboardEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedDashboardEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedDashboardEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqUserBasedDashboardEmbeddingLambdaDataSource"
      ]
    },
    "QueryuserBasedDashboardEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "userBasedDashboardEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqUserBasedDashboardEmbeddingLambdaDataSourceInvokePbqUserBasedDashboardEmbeddingLambdaDataSourceAppSyncFunctionFDBF8630",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"userBasedDashboardEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.userBasedDashboardEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqUserBasedQEmbeddingLambdaDataSourceServiceRole73D3FA3C": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqUserBasedQEmbeddingLambdaDataSourceServiceRoleDefaultPolicy66791CC5": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqUserBasedQEmbeddingLambdaDataSourceServiceRoleDefaultPolicy66791CC5",
        "Roles": [
          {
            "Ref": "PbqUserBasedQEmbeddingLambdaDataSourceServiceRole73D3FA3C"
          }
        ]
      }
    },
    "PbqUserBasedQEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqUserBasedQEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedQEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqUserBasedQEmbeddingLambdaDataSourceServiceRole73D3FA3C",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqUserBasedQEmbeddingLambdaDataSourceInvokePbqUserBasedQEmbeddingLambdaDataSourceAppSyncFunctionB20994B1": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqUserBasedQEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqUserBasedQEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedQEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedQEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqUserBasedQEmbeddingLambdaDataSource"
      ]
    },
    "QueryuserBasedQEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "userBasedQEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqUserBasedQEmbeddingLambdaDataSourceInvokePbqUserBasedQEmbeddingLambdaDataSourceAppSyncFunctionB20994B1",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"userBasedQEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.userBasedQEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqUserBasedVisualEmbeddingLambdaDataSourceServiceRoleC4FCD63D": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqUserBasedVisualEmbeddingLambdaDataSourceServiceRoleDefaultPolicyE199A914": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqUserBasedVisualEmbeddingLambdaDataSourceServiceRoleDefaultPolicyE199A914",
        "Roles": [
          {
            "Ref": "PbqUserBasedVisualEmbeddingLambdaDataSourceServiceRoleC4FCD63D"
          }
        ]
      }
    },
    "PbqUserBasedVisualEmbeddingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqUserBasedVisualEmbeddingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqUserBasedVisualEmbedding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqUserBasedVisualEmbeddingLambdaDataSourceServiceRoleC4FCD63D",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqUserBasedVisualEmbeddingLambdaDataSourceInvokePbqUserBasedVisualEmbeddingLambdaDataSourceAppSyncFunctionBEF3FFF1": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqUserBasedVisualEmbeddingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqUserBasedVisualEmbeddingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedVisualEmbeddingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqUserBasedVisualEmbeddingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqUserBasedVisualEmbeddingLambdaDataSource"
      ]
    },
    "QueryuserBasedVisualEmbeddingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "userBasedVisualEmbedding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqUserBasedVisualEmbeddingLambdaDataSourceInvokePbqUserBasedVisualEmbeddingLambdaDataSourceAppSyncFunctionBEF3FFF1",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"userBasedVisualEmbedding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.userBasedVisualEmbedding.res.vtl"
            ]
          ]
        }
      }
    },
    "PbqTenantOnboardingLambdaDataSourceServiceRole224C5827": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "appsync.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        }
      }
    },
    "PbqTenantOnboardingLambdaDataSourceServiceRoleDefaultPolicy44A5461B": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "lambda:InvokeFunction",
              "Effect": "Allow",
              "Resource": [
                {
                  "Fn::If": [
                    "HasEnvironmentParameter",
                    {
                      "Fn::Sub": [
                        "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding-${env}",
                        {
                          "env": {
                            "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                          }
                        }
                      ]
                    },
                    {
                      "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding"
                    }
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      {
                        "Fn::If": [
                          "HasEnvironmentParameter",
                          {
                            "Fn::Sub": [
                              "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding-${env}",
                              {
                                "env": {
                                  "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                                }
                              }
                            ]
                          },
                          {
                            "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding"
                          }
                        ]
                      },
                      ":*"
                    ]
                  ]
                }
              ]
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "PbqTenantOnboardingLambdaDataSourceServiceRoleDefaultPolicy44A5461B",
        "Roles": [
          {
            "Ref": "PbqTenantOnboardingLambdaDataSourceServiceRole224C5827"
          }
        ]
      }
    },
    "PbqTenantOnboardingLambdaDataSource": {
      "Type": "AWS::AppSync::DataSource",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "Name": "PbqTenantOnboardingLambdaDataSource",
        "Type": "AWS_LAMBDA",
        "LambdaConfig": {
          "LambdaFunctionArn": {
            "Fn::If": [
              "HasEnvironmentParameter",
              {
                "Fn::Sub": [
                  "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding-${env}",
                  {
                    "env": {
                      "Ref": "referencetotransformerrootstackenv10C5A902Ref"
                    }
                  }
                ]
              },
              {
                "Fn::Sub": "arn:aws:lambda:${AWS::Region}:${AWS::AccountId}:function:pbqTenantOnboarding"
              }
            ]
          }
        },
        "ServiceRoleArn": {
          "Fn::GetAtt": [
            "PbqTenantOnboardingLambdaDataSourceServiceRole224C5827",
            "Arn"
          ]
        }
      }
    },
    "InvokePbqTenantOnboardingLambdaDataSourceInvokePbqTenantOnboardingLambdaDataSourceAppSyncFunction34610D0F": {
      "Type": "AWS::AppSync::FunctionConfiguration",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "DataSourceName": {
          "Fn::GetAtt": [
            "PbqTenantOnboardingLambdaDataSource",
            "Name"
          ]
        },
        "Name": "InvokePbqTenantOnboardingLambdaDataSource",
        "FunctionVersion": "2018-05-29",
        "RequestMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqTenantOnboardingLambdaDataSource.req.vtl"
            ]
          ]
        },
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/InvokePbqTenantOnboardingLambdaDataSource.res.vtl"
            ]
          ]
        }
      },
      "DependsOn": [
        "PbqTenantOnboardingLambdaDataSource"
      ]
    },
    "QuerytenantOnboardingResolver": {
      "Type": "AWS::AppSync::Resolver",
      "Properties": {
        "ApiId": {
          "Ref": "referencetotransformerrootstackGraphQLAPI20497F53ApiId"
        },
        "FieldName": "tenantOnboarding",
        "TypeName": "Query",
        "Kind": "PIPELINE",
        "PipelineConfig": {
          "Functions": [
            {
              "Fn::GetAtt": [
                "InvokePbqTenantOnboardingLambdaDataSourceInvokePbqTenantOnboardingLambdaDataSourceAppSyncFunction34610D0F",
                "FunctionId"
              ]
            }
          ]
        },
        "RequestMappingTemplate": "## [Start] Stash resolver specific context.. **\n$util.qr($ctx.stash.put(\"typeName\", \"Query\"))\n$util.qr($ctx.stash.put(\"fieldName\", \"tenantOnboarding\"))\n{}\n## [End] Stash resolver specific context.. **",
        "ResponseMappingTemplateS3Location": {
          "Fn::Join": [
            "",
            [
              "s3://",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentBucket7592718ARef"
              },
              "/",
              {
                "Ref": "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref"
              },
              "/resolvers/Query.tenantOnboarding.res.vtl"
            ]
          ]
        }
      }
    }
  },
  "Parameters": {
    "referencetotransformerrootstackenv10C5A902Ref": {
      "Type": "String"
    },
    "referencetotransformerrootstackGraphQLAPI20497F53ApiId": {
      "Type": "String"
    },
    "referencetotransformerrootstackS3DeploymentBucket7592718ARef": {
      "Type": "String"
    },
    "referencetotransformerrootstackS3DeploymentRootKeyA71EA735Ref": {
      "Type": "String"
    }
  }
}